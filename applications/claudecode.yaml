apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-claude-code
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
  annotations:
    grafana_folder: "Applications"
data:
  claudecode.json: |
    {
      "__elements": {},
      "__requires": [
        {
          "type": "panel",
          "id": "bargauge",
          "name": "Bar gauge",
          "version": ""
        },
        {
          "type": "panel",
          "id": "gauge",
          "name": "Gauge",
          "version": ""
        },
        {
          "type": "grafana",
          "id": "grafana",
          "name": "Grafana",
          "version": "11.6.0"
        },
        {
          "type": "panel",
          "id": "piechart",
          "name": "Pie chart",
          "version": ""
        },
        {
          "type": "datasource",
          "id": "prometheus",
          "name": "Prometheus",
          "version": "1.0.0"
        },
        {
          "type": "panel",
          "id": "stat",
          "name": "Stat",
          "version": ""
        },
        {
          "type": "panel",
          "id": "timeseries",
          "name": "Time series",
          "version": ""
        }
      ],
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {
              "type": "grafana",
              "uid": "-- Grafana --"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "type": "dashboard"
          }
        ]
      },
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 1,
      "id": null,
      "links": [],
      "panels": [
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 },
          "id": 100,
          "panels": [],
          "title": "Overview",
          "type": "row"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Total cost accumulated in selected time range",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green" },
                  { "color": "yellow", "value": 5 },
                  { "color": "orange", "value": 15 },
                  { "color": "red", "value": 30 }
                ]
              },
              "unit": "currencyUSD"
            },
            "overrides": []
          },
          "gridPos": { "h": 4, "w": 4, "x": 0, "y": 1 },
          "id": 5,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_cost_usage_USD_total[$__range]))",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Total Cost (Range)",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Total tokens used in selected time range",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [{ "color": "blue" }]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 4, "w": 4, "x": 4, "y": 1 },
          "id": 7,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_token_usage_tokens_total[$__range]))",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Total Tokens (Range)",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Lines of code written by Claude in time range",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [{ "color": "semi-dark-green" }]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": { "h": 4, "w": 4, "x": 8, "y": 1 },
          "id": 6,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_lines_of_code_count_total[$__range]))",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Lines of Code (Range)",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Commits made via Claude Code in time range",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [{ "color": "purple" }]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": { "h": 4, "w": 4, "x": 12, "y": 1 },
          "id": 2,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_commit_count_total[$__range]))",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Commits (Range)",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Your active time with Claude in time range",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [{ "color": "orange" }]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": { "h": 4, "w": 4, "x": 16, "y": 1 },
          "id": 4,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_active_time_seconds_total{type=\"user\"}[$__range]))",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Your Time (Range)",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Claude CLI processing time in time range",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [{ "color": "light-purple" }]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": { "h": 4, "w": 4, "x": 20, "y": 1 },
          "id": 3,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_active_time_seconds_total{type=\"cli\"}[$__range]))",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "CLI Time (Range)",
          "type": "stat"
        },
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 5 },
          "id": 101,
          "panels": [],
          "title": "Token Breakdown",
          "type": "row"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Tokens sent to Claude",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [{ "color": "light-blue" }]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 4, "w": 6, "x": 0, "y": 6 },
          "id": 10,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_token_usage_tokens_total{type=\"input\"}[$__range]))",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Input Tokens",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Tokens generated by Claude",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [{ "color": "light-orange" }]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 4, "w": 6, "x": 6, "y": 6 },
          "id": 11,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_token_usage_tokens_total{type=\"output\"}[$__range]))",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Output Tokens",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Tokens read from cache (saves money!)",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [{ "color": "semi-dark-green" }]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 4, "w": 6, "x": 12, "y": 6 },
          "id": 12,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_token_usage_tokens_total{type=\"cacheRead\"}[$__range]))",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Cache Read",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Tokens written to cache",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [{ "color": "light-purple" }]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 4, "w": 6, "x": 18, "y": 6 },
          "id": 13,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_token_usage_tokens_total{type=\"cacheCreation\"}[$__range]))",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Cache Creation",
          "type": "stat"
        },
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 10 },
          "id": 102,
          "panels": [],
          "title": "Efficiency & Productivity",
          "type": "row"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Percentage of input served from cache (higher = better)",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "red" },
                  { "color": "yellow", "value": 30 },
                  { "color": "green", "value": 60 }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": { "h": 6, "w": 6, "x": 0, "y": 11 },
          "id": 14,
          "options": {
            "minVizHeight": 75,
            "minVizWidth": 75,
            "orientation": "auto",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showThresholdLabels": false,
            "showThresholdMarkers": true,
            "sizing": "auto"
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_token_usage_tokens_total{type=\"cacheRead\"}[$__range])) / (sum(increase(claude_code_token_usage_tokens_total{type=\"cacheRead\"}[$__range])) + sum(increase(claude_code_token_usage_tokens_total{type=\"input\"}[$__range]))) * 100",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Cache Hit Rate",
          "type": "gauge"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "CLI time / Your time - higher means Claude is doing more work per your input",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 1,
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "red" },
                  { "color": "yellow", "value": 5 },
                  { "color": "green", "value": 15 },
                  { "color": "super-light-green", "value": 30 }
                ]
              },
              "unit": "x"
            },
            "overrides": []
          },
          "gridPos": { "h": 6, "w": 6, "x": 6, "y": 11 },
          "id": 31,
          "options": {
            "minVizHeight": 75,
            "minVizWidth": 75,
            "orientation": "auto",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showThresholdLabels": true,
            "showThresholdMarkers": true,
            "sizing": "auto"
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_active_time_seconds_total{type=\"cli\"}[$__range])) / sum(increase(claude_code_active_time_seconds_total{type=\"user\"}[$__range]))",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Leverage Ratio",
          "type": "gauge"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Average cost per 1000 output tokens",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 4,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green" },
                  { "color": "yellow", "value": 0.01 },
                  { "color": "red", "value": 0.02 }
                ]
              },
              "unit": "currencyUSD"
            },
            "overrides": []
          },
          "gridPos": { "h": 6, "w": 6, "x": 12, "y": 11 },
          "id": 15,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_cost_usage_USD_total[$__range])) / sum(increase(claude_code_token_usage_tokens_total{type=\"output\"}[$__range])) * 1000",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Cost per 1K Output",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Cost per line of code written",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 4,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green" },
                  { "color": "yellow", "value": 0.01 },
                  { "color": "red", "value": 0.05 }
                ]
              },
              "unit": "currencyUSD"
            },
            "overrides": []
          },
          "gridPos": { "h": 6, "w": 6, "x": 18, "y": 11 },
          "id": 16,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_cost_usage_USD_total[$__range])) / sum(increase(claude_code_lines_of_code_count_total[$__range]))",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Cost per Line of Code",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Productivity per API-equivalent dollar. Higher is better - green at 200+ lines per dollar.",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "red" },
                  { "color": "yellow", "value": 50 },
                  { "color": "green", "value": 200 },
                  { "color": "super-light-green", "value": 500 }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": { "h": 3, "w": 8, "x": 0, "y": 17 },
          "id": 210,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_lines_of_code_count_total[$__range])) / sum(increase(claude_code_cost_usage_USD_total[$__range]))",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Lines per Dollar",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Equivalent developer hours based on 75 lines/hour baseline productivity.",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 1,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "light-blue" },
                  { "color": "blue", "value": 10 },
                  { "color": "semi-dark-blue", "value": 50 },
                  { "color": "dark-blue", "value": 100 }
                ]
              },
              "unit": "h"
            },
            "overrides": []
          },
          "gridPos": { "h": 3, "w": 8, "x": 8, "y": 17 },
          "id": 211,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_lines_of_code_count_total[$__range])) / 75",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Dev Equiv (Hours)",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Value vs $100/month subscription. Shows how much API-equivalent value you're getting. Green at 1x+ means you're getting your money's worth.",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 2,
              "mappings": [],
              "max": 10,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "red" },
                  { "color": "yellow", "value": 0.5 },
                  { "color": "green", "value": 1 },
                  { "color": "super-light-green", "value": 3 }
                ]
              },
              "unit": "x"
            },
            "overrides": []
          },
          "gridPos": { "h": 3, "w": 8, "x": 16, "y": 17 },
          "id": 212,
          "options": {
            "minVizHeight": 75,
            "minVizWidth": 75,
            "orientation": "auto",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showThresholdLabels": false,
            "showThresholdMarkers": true,
            "sizing": "auto"
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_cost_usage_USD_total[$__range])) / 100",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Subscription ROI",
          "type": "gauge"
        },
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 20 },
          "id": 105,
          "panels": [],
          "title": "API Equivalent (What This Would Cost)",
          "type": "row"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "What your usage would cost on API pricing. Compare this to your $100/month subscription.",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "light-blue" },
                  { "color": "blue", "value": 50 },
                  { "color": "semi-dark-green", "value": 100 },
                  { "color": "green", "value": 200 }
                ]
              },
              "unit": "currencyUSD"
            },
            "overrides": []
          },
          "gridPos": { "h": 5, "w": 5, "x": 0, "y": 21 },
          "id": 220,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_cost_usage_USD_total[$__range]))",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "API Equivalent Cost",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Dollars saved vs API pricing. Green when positive means you're saving money with the subscription!",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "red" },
                  { "color": "yellow", "value": 0 },
                  { "color": "green", "value": 50 },
                  { "color": "super-light-green", "value": 200 }
                ]
              },
              "unit": "currencyUSD"
            },
            "overrides": []
          },
          "gridPos": { "h": 5, "w": 5, "x": 5, "y": 21 },
          "id": 221,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_cost_usage_USD_total[$__range])) - 100",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Subscription Savings",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "API-equivalent value generated per hour of your active time. Higher means better productivity amplification.",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "red" },
                  { "color": "yellow", "value": 10 },
                  { "color": "green", "value": 50 },
                  { "color": "super-light-green", "value": 100 }
                ]
              },
              "unit": "currencyUSD"
            },
            "overrides": []
          },
          "gridPos": { "h": 5, "w": 5, "x": 10, "y": 21 },
          "id": 222,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_cost_usage_USD_total[$__range])) / (sum(increase(claude_code_active_time_seconds_total{type=\"user\"}[$__range])) / 3600)",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Value per Your Hour",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Lines of code written per hour of your active time. Measures your productivity amplification with Claude.",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "red" },
                  { "color": "yellow", "value": 100 },
                  { "color": "green", "value": 500 },
                  { "color": "super-light-green", "value": 1000 }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 5, "w": 5, "x": 15, "y": 21 },
          "id": 223,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_lines_of_code_count_total[$__range])) / (sum(increase(claude_code_active_time_seconds_total{type=\"user\"}[$__range])) / 3600)",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Lines per Your Hour",
          "type": "stat"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Estimated water used for AI inference cooling (~1ml per 1K tokens).",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 1,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [{ "color": "light-blue" }]
              },
              "unit": "gallons"
            },
            "overrides": []
          },
          "gridPos": { "h": 5, "w": 4, "x": 20, "y": 21 },
          "id": 224,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum(increase(claude_code_token_usage_tokens_total[$__range])) * 0.001 / 1000 * 0.264172",
              "instant": true,
              "refId": "A"
            }
          ],
          "title": "Water Impact (Est.)",
          "type": "stat"
        },
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 26 },
          "id": 103,
          "panels": [],
          "title": "Breakdowns",
          "type": "row"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Distribution of token usage by type",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": { "hideFrom": { "legend": false, "tooltip": false, "viz": false } },
              "mappings": [],
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 8, "w": 8, "x": 0, "y": 27 },
          "id": 20,
          "options": {
            "legend": { "displayMode": "table", "placement": "right", "showLegend": true, "values": ["value", "percent"] },
            "pieType": "donut",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" }
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum by (type) (increase(claude_code_token_usage_tokens_total[$__range]))",
              "instant": true,
              "legendFormat": "{{type}}",
              "refId": "A"
            }
          ],
          "title": "Tokens by Type",
          "type": "piechart"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Token usage broken down by model",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": { "hideFrom": { "legend": false, "tooltip": false, "viz": false } },
              "mappings": [],
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 8, "w": 8, "x": 8, "y": 27 },
          "id": 21,
          "options": {
            "legend": { "displayMode": "table", "placement": "right", "showLegend": true, "values": ["value", "percent"] },
            "pieType": "donut",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" }
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum by (model) (increase(claude_code_token_usage_tokens_total[$__range]))",
              "instant": true,
              "legendFormat": "{{model}}",
              "refId": "A"
            }
          ],
          "title": "Tokens by Model",
          "type": "piechart"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "CLI processing time vs User interaction time",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": { "hideFrom": { "legend": false, "tooltip": false, "viz": false } },
              "mappings": [],
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": { "h": 8, "w": 8, "x": 16, "y": 27 },
          "id": 30,
          "options": {
            "legend": { "displayMode": "table", "placement": "right", "showLegend": true, "values": ["value", "percent"] },
            "pieType": "donut",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" }
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum by (type) (increase(claude_code_active_time_seconds_total[$__range]))",
              "instant": true,
              "legendFormat": "{{type}}",
              "refId": "A"
            }
          ],
          "title": "Time Distribution",
          "type": "piechart"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "API cost broken down by model",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "thresholds" },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  { "color": "green" },
                  { "color": "yellow", "value": 5 },
                  { "color": "red", "value": 20 }
                ]
              },
              "unit": "currencyUSD"
            },
            "overrides": []
          },
          "gridPos": { "h": 5, "w": 24, "x": 0, "y": 35 },
          "id": 22,
          "options": {
            "displayMode": "gradient",
            "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": false },
            "maxVizHeight": 300,
            "minVizHeight": 16,
            "minVizWidth": 8,
            "namePlacement": "auto",
            "orientation": "horizontal",
            "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
            "showUnfilled": true,
            "sizing": "auto",
            "valueMode": "color"
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum by (model) (increase(claude_code_cost_usage_USD_total[$__range]))",
              "instant": true,
              "legendFormat": "{{model}}",
              "refId": "A"
            }
          ],
          "title": "Cost by Model",
          "type": "bargauge"
        },
        {
          "collapsed": false,
          "gridPos": { "h": 1, "w": 24, "x": 0, "y": 40 },
          "id": 104,
          "panels": [],
          "title": "Time Series",
          "type": "row"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Token consumption rate by type",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "tokens/sec",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 15,
                "gradientMode": "opacity",
                "hideFrom": { "legend": false, "tooltip": false, "viz": false },
                "insertNulls": false,
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": { "type": "linear" },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": { "group": "A", "mode": "none" },
                "thresholdsStyle": { "mode": "off" }
              },
              "mappings": [],
              "thresholds": { "mode": "absolute", "steps": [{ "color": "green" }] },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 8, "w": 12, "x": 0, "y": 41 },
          "id": 40,
          "options": {
            "legend": { "calcs": ["sum", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true },
            "tooltip": { "hideZeros": false, "mode": "multi", "sort": "desc" }
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum by (type) (rate(claude_code_token_usage_tokens_total[5m]))",
              "legendFormat": "{{type}}",
              "refId": "A"
            }
          ],
          "title": "Token Usage Over Time",
          "type": "timeseries"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Token consumption rate by model",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "tokens/sec",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 15,
                "gradientMode": "opacity",
                "hideFrom": { "legend": false, "tooltip": false, "viz": false },
                "insertNulls": false,
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": { "type": "linear" },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": { "group": "A", "mode": "none" },
                "thresholdsStyle": { "mode": "off" }
              },
              "mappings": [],
              "thresholds": { "mode": "absolute", "steps": [{ "color": "green" }] },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 8, "w": 12, "x": 12, "y": 41 },
          "id": 41,
          "options": {
            "legend": { "calcs": ["sum", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true },
            "tooltip": { "hideZeros": false, "mode": "multi", "sort": "desc" }
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum by (model) (rate(claude_code_token_usage_tokens_total[5m]))",
              "legendFormat": "{{model}}",
              "refId": "A"
            }
          ],
          "title": "Token Usage by Model Over Time",
          "type": "timeseries"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Cost accumulation over time ($/hour rate)",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "$/hour",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 20,
                "gradientMode": "scheme",
                "hideFrom": { "legend": false, "tooltip": false, "viz": false },
                "insertNulls": false,
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": { "type": "linear" },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": { "group": "A", "mode": "none" },
                "thresholdsStyle": { "mode": "off" }
              },
              "mappings": [],
              "thresholds": { "mode": "absolute", "steps": [{ "color": "green" }] },
              "unit": "currencyUSD"
            },
            "overrides": []
          },
          "gridPos": { "h": 8, "w": 12, "x": 0, "y": 49 },
          "id": 42,
          "options": {
            "legend": { "calcs": ["sum", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true },
            "tooltip": { "hideZeros": false, "mode": "multi", "sort": "desc" }
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum by (model) (rate(claude_code_cost_usage_USD_total[5m])) * 3600",
              "legendFormat": "{{model}}",
              "refId": "A"
            }
          ],
          "title": "Cost Rate ($/hour)",
          "type": "timeseries"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "Cumulative cost over the selected time range",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "cumulative $",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 30,
                "gradientMode": "scheme",
                "hideFrom": { "legend": false, "tooltip": false, "viz": false },
                "insertNulls": false,
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": { "type": "linear" },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": { "group": "A", "mode": "normal" },
                "thresholdsStyle": { "mode": "off" }
              },
              "mappings": [],
              "thresholds": { "mode": "absolute", "steps": [{ "color": "green" }] },
              "unit": "currencyUSD"
            },
            "overrides": []
          },
          "gridPos": { "h": 8, "w": 12, "x": 12, "y": 49 },
          "id": 44,
          "options": {
            "legend": { "calcs": ["lastNotNull"], "displayMode": "table", "placement": "bottom", "showLegend": true },
            "tooltip": { "hideZeros": false, "mode": "multi", "sort": "desc" }
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum by (model) (increase(claude_code_cost_usage_USD_total[5m]))",
              "legendFormat": "{{model}}",
              "refId": "A"
            }
          ],
          "title": "Cumulative Cost Over Time",
          "type": "timeseries"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "description": "CLI and User activity rate",
          "fieldConfig": {
            "defaults": {
              "color": { "mode": "palette-classic" },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "seconds/sec",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 20,
                "gradientMode": "opacity",
                "hideFrom": { "legend": false, "tooltip": false, "viz": false },
                "insertNulls": false,
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": { "type": "linear" },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": { "group": "A", "mode": "none" },
                "thresholdsStyle": { "mode": "off" }
              },
              "mappings": [],
              "thresholds": { "mode": "absolute", "steps": [{ "color": "green" }] },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": { "h": 8, "w": 24, "x": 0, "y": 57 },
          "id": 43,
          "options": {
            "legend": { "calcs": ["sum", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true },
            "tooltip": { "hideZeros": false, "mode": "multi", "sort": "desc" }
          },
          "pluginVersion": "11.6.0",
          "targets": [
            {
              "datasource": { "type": "prometheus", "uid": "${datasource}" },
              "expr": "sum by (type) (rate(claude_code_active_time_seconds_total[5m]))",
              "legendFormat": "{{type}}",
              "refId": "A"
            }
          ],
          "title": "Active Time Over Time",
          "type": "timeseries"
        }
      ],
      "refresh": "30s",
      "schemaVersion": 41,
      "tags": ["claude", "productivity", "ai", "development", "otel"],
      "templating": {
        "list": [
          {
            "current": {},
            "includeAll": false,
            "label": "Data Source",
            "name": "datasource",
            "options": [],
            "query": "prometheus",
            "refresh": 1,
            "regex": "",
            "type": "datasource"
          }
        ]
      },
      "time": { "from": "now-21d", "to": "now" },
      "timepicker": {
        "refresh_intervals": ["5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h"]
      },
      "timezone": "browser",
      "title": "Claude Code Metrics",
      "uid": "claude-code-metrics",
      "version": 5,
      "weekStart": ""
    }
